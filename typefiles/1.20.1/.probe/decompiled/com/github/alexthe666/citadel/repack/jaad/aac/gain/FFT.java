package com.github.alexthe666.citadel.repack.jaad.aac.gain;

class FFT {

    private static final float[][] FFT_TABLE_128 = new float[][] { { 1.0F, -0.0F }, { 0.99879545F, -0.049067676F }, { 0.9951847F, -0.09801714F }, { 0.9891765F, -0.14673047F }, { 0.98078525F, -0.19509032F }, { 0.97003126F, -0.24298018F }, { 0.95694035F, -0.29028466F }, { 0.94154406F, -0.33688986F }, { 0.9238795F, -0.38268343F }, { 0.9039893F, -0.42755508F }, { 0.8819213F, -0.47139674F }, { 0.8577286F, -0.51410276F }, { 0.8314696F, -0.55557024F }, { 0.8032075F, -0.5956993F }, { 0.77301043F, -0.6343933F }, { 0.7409511F, -0.671559F }, { 0.70710677F, -0.70710677F }, { 0.671559F, -0.7409511F }, { 0.6343933F, -0.77301043F }, { 0.5956993F, -0.8032075F }, { 0.55557024F, -0.8314696F }, { 0.51410276F, -0.8577286F }, { 0.47139674F, -0.8819213F }, { 0.42755508F, -0.9039893F }, { 0.38268343F, -0.9238795F }, { 0.33688986F, -0.94154406F }, { 0.29028466F, -0.95694035F }, { 0.24298018F, -0.97003126F }, { 0.19509032F, -0.98078525F }, { 0.14673047F, -0.9891765F }, { 0.09801714F, -0.9951847F }, { 0.049067676F, -0.99879545F }, { 6.123234E-17F, -1.0F }, { -0.049067676F, -0.99879545F }, { -0.09801714F, -0.9951847F }, { -0.14673047F, -0.9891765F }, { -0.19509032F, -0.98078525F }, { -0.24298018F, -0.97003126F }, { -0.29028466F, -0.95694035F }, { -0.33688986F, -0.94154406F }, { -0.38268343F, -0.9238795F }, { -0.42755508F, -0.9039893F }, { -0.47139674F, -0.8819213F }, { -0.51410276F, -0.8577286F }, { -0.55557024F, -0.8314696F }, { -0.5956993F, -0.8032075F }, { -0.6343933F, -0.77301043F }, { -0.671559F, -0.7409511F }, { -0.70710677F, -0.70710677F }, { -0.7409511F, -0.671559F }, { -0.77301043F, -0.6343933F }, { -0.8032075F, -0.5956993F }, { -0.8314696F, -0.55557024F }, { -0.8577286F, -0.51410276F }, { -0.8819213F, -0.47139674F }, { -0.9039893F, -0.42755508F }, { -0.9238795F, -0.38268343F }, { -0.94154406F, -0.33688986F }, { -0.95694035F, -0.29028466F }, { -0.97003126F, -0.24298018F }, { -0.98078525F, -0.19509032F }, { -0.9891765F, -0.14673047F }, { -0.9951847F, -0.09801714F }, { -0.99879545F, -0.049067676F } };

    private static final float[][] FFT_TABLE_16 = new float[][] { { 1.0F, -0.0F }, { 0.9238795F, -0.38268343F }, { 0.70710677F, -0.70710677F }, { 0.38268343F, -0.9238795F }, { 6.123234E-17F, -1.0F }, { -0.38268343F, -0.9238795F }, { -0.70710677F, -0.70710677F }, { -0.9238795F, -0.38268343F } };

    static void process(float[][] in, int n) {
        int ln = (int) Math.round(Math.log((double) n) / Math.log(2.0));
        float[][] table = n == 128 ? FFT_TABLE_128 : FFT_TABLE_16;
        float[][] rev = new float[n][2];
        int ii = 0;
        for (int i = 0; i < n; i++) {
            rev[i][0] = in[ii][0];
            rev[i][1] = in[ii][1];
            int k;
            for (k = n >> 1; ii >= k && k > 0; k >>= 1) {
                ii -= k;
            }
            ii += k;
        }
        for (int var16 = 0; var16 < n; var16++) {
            in[var16][0] = rev[var16][0];
            in[var16][1] = rev[var16][1];
        }
        int blocks = n / 2;
        int size = 2;
        float[] a = new float[2];
        for (int var17 = 0; var17 < ln; var17++) {
            int size2 = size / 2;
            int k0 = 0;
            int k1 = size2;
            for (int j = 0; j < blocks; j++) {
                int l = 0;
                for (int k = 0; k < size2; k++) {
                    a[0] = in[k1][0] * table[l][0] - in[k1][1] * table[l][1];
                    a[1] = in[k1][0] * table[l][1] + in[k1][1] * table[l][0];
                    in[k1][0] = in[k0][0] - a[0];
                    in[k1][1] = in[k0][1] - a[1];
                    in[k0][0] = in[k0][0] + a[0];
                    in[k0][1] = in[k0][1] + a[1];
                    l += blocks;
                    k0++;
                    k1++;
                }
                k0 += size2;
                k1 += size2;
            }
            blocks /= 2;
            size *= 2;
        }
    }
}